<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compiler Design Video Library | GATE 2024</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Optional: Specific override if you want to differentiate this page's active state */
        /* .category-btn.active {
            background-color: var(--accent);
        } */
    </style>
</head>
<body>

    <nav class="navbar">
        <div class="nav-container">
            <a href="./index.html" class="nav-brand">
                <i class="fas fa-graduation-cap"></i>
                <span>GATE Courses</span>
            </a>
            <ul class="nav-links">
                <li><a href="./index.html" class="home-btn"><i class="fas fa-home"></i> Home</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <header class="fade-up">
            <h1><i class="fas fa-cogs" style="color: var(--accent);"></i> Compiler Design</h1>
            <p class="subtitle">Complete GATE 2024 FastTrack Batch covering Lexical Analysis, Parsing, Syntax Directed Translations, and Code Optimization</p>
        </header>
        
        <div class="search-container fade-up">
            <input type="text" id="searchInput" placeholder="Search for compiler topics (e.g., Parsing, Lexical, Code Gen)...">
            <div class="search-icon">
                <i class="fas fa-search"></i>
            </div>
        </div>
        
        <div class="categories fade-up">
            <button class="category-btn active" data-category="all">All Videos</button>
            <button class="category-btn" data-category="lexical">Lexical Analysis</button>
            <button class="category-btn" data-category="parsing">Parsing</button>
            <button class="category-btn" data-category="sdt">Syntax Directed Translation</button>
            <button class="category-btn" data-category="codegen">Code Generation</button>
        </div>
        
        <div class="main-content fade-up">
            
            <div class="video-player-container">
                <div class="video-player">
                    <iframe id="mainVideo" src="https://www.youtube.com/embed/y6m71C-e40s" 
                            title="YouTube video player" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen>
                    </iframe>
                </div>
                <div class="video-info">
                    <h2 class="video-title" id="mainVideoTitle">Compiler Design 01 | Lexical Analysis</h2>
                    <div class="video-meta">
                        <span id="mainVideoLecture"><i class="fas fa-book-open"></i> Lecture 1</span>
                        <span id="mainVideoCategory"><i class="fas fa-folder"></i> Lexical Analysis</span>
                    </div>
                    <p class="video-desc" id="mainVideoDesc">Introduction to lexical analysis, tokens, patterns, and lexemes. Understanding the role of lexical analyzer in compiler design.</p>
                </div>
            </div>
            
            <div class="video-list-container">
                <h3 class="video-list-title">All Lectures</h3>
                <div class="video-list" id="videoList">
                    </div>
            </div>
        </div>
        
        <footer>
            <div class="footer-content" style="text-align: center;">
                <p>Â© 2024 Compiler Design Video Library | GATE 2024 FastTrack Batch</p>
                <div class="footer-links" style="display: flex; justify-content: center; gap: 20px;">
                    <a href="./index.html">Home</a>
                    <a href="./about.html">About</a>
                    <a href="#contact">Contact</a>
                    <a href="#privacy">Privacy Policy</a>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Video data for Compiler Design
        const videos = [
            {
                id: 1,
                title: "Compiler Design 01 | Lexical Analysis",
                category: "lexical",
                youtubeId: "y6m71C-e40s",
                description: "Introduction to lexical analysis, tokens, patterns, and lexemes. Understanding the role of lexical analyzer in compiler design."
            },
            {
                id: 2,
                title: "Compiler Design 02 | Top-Down Parsing",
                category: "parsing",
                youtubeId: "JgDAweCCEI8",
                description: "Understanding top-down parsing techniques including recursive descent and predictive parsing. LL(1) parsing and construction of parse trees."
            },
            {
                id: 3,
                title: "Compiler Design 03 | Bottom-Up Parsing",
                category: "parsing",
                youtubeId: "W0EkrvGDoBY",
                description: "Exploring bottom-up parsing techniques including LR parsers, SLR, CLR, and LALR parsing. Handle pruning and shift-reduce parsing."
            },
            {
                id: 4,
                title: "Compiler Design 04 | Syntax Directed Translations",
                category: "sdt",
                youtubeId: "tVud-lFAdTg",
                description: "Understanding syntax-directed definitions, inherited and synthesized attributes. Application of syntax-directed translation in compilers."
            },
            {
                id: 5,
                title: "Compiler Design 05 | Intermediate Code and Code Optimization",
                category: "codegen",
                youtubeId: "oERJfSvelXA",
                description: "Introduction to intermediate code generation, three-address code, and code optimization techniques for efficient compiler output."
            }
        ];

        // DOM elements
        const mainVideo = document.getElementById('mainVideo');
        const mainVideoTitle = document.getElementById('mainVideoTitle');
        const mainVideoLecture = document.getElementById('mainVideoLecture');
        const mainVideoCategory = document.getElementById('mainVideoCategory');
        const mainVideoDesc = document.getElementById('mainVideoDesc');
        const videoList = document.getElementById('videoList');
        const categoryButtons = document.querySelectorAll('.category-btn');
        const searchInput = document.getElementById('searchInput');

        // Helper function to get category display name
        function getCategoryName(category) {
            const categoryMap = {
                'lexical': 'Lexical Analysis',
                'parsing': 'Parsing',
                'sdt': 'Syntax Directed Translation',
                'codegen': 'Code Generation'
            };
            return categoryMap[category] || category;
        }

        // Display video list
        function displayVideoList(videosToDisplay) {
            videoList.innerHTML = '';
            
            videosToDisplay.forEach(video => {
                const videoItem = document.createElement('div');
                videoItem.className = 'video-item';
                videoItem.setAttribute('data-category', video.category);
                videoItem.setAttribute('data-id', video.id);
                
                // Set first video as active by default if ID matches current main video
                // (In a real app, you might track currentVideoId state)
                
                videoItem.innerHTML = `
                    <div class="video-thumb">
                        <iframe src="https://www.youtube.com/embed/${video.youtubeId}" 
                                title="${video.title}" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                allowfullscreen>
                        </iframe>
                    </div>
                    <div class="video-item-info">
                        <div class="video-item-title">${video.title}</div>
                        <div class="video-item-meta">
                            <span>Lecture ${video.id}</span>
                            <span>${getCategoryName(video.category)}</span>
                        </div>
                    </div>
                `;
                
                // Add click event to load video in main player
                videoItem.addEventListener('click', () => {
                    // Remove active class from all items
                    document.querySelectorAll('.video-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    
                    // Add active class to clicked item
                    videoItem.classList.add('active');
                    
                    // Update main video player
                    mainVideo.src = `https://www.youtube.com/embed/${video.youtubeId}`;
                    mainVideoTitle.textContent = video.title;
                    mainVideoLecture.innerHTML = `<i class="fas fa-book-open"></i> Lecture ${video.id}`;
                    mainVideoCategory.innerHTML = `<i class="fas fa-folder"></i> ${getCategoryName(video.category)}`;
                    mainVideoDesc.textContent = video.description;
                    
                    // Smooth scroll to player on mobile
                    if(window.innerWidth < 1024) {
                        mainVideo.scrollIntoView({behavior: "smooth"});
                    }
                });
                
                videoList.appendChild(videoItem);
            });
        }

        // Filter videos by category
        function filterVideos(category) {
            if (category === 'all') {
                return videos;
            }
            return videos.filter(video => video.category === category);
        }

        // Search videos
        function searchVideos(query) {
            const lowerCaseQuery = query.toLowerCase();
            return videos.filter(video => 
                video.title.toLowerCase().includes(lowerCaseQuery) || 
                video.description.toLowerCase().includes(lowerCaseQuery)
            );
        }

        // Event listeners for category buttons
        categoryButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Remove active class from all buttons
                categoryButtons.forEach(btn => btn.classList.remove('active'));
                // Add active class to clicked button
                button.classList.add('active');
                
                const category = button.getAttribute('data-category');
                const filteredVideos = filterVideos(category);
                displayVideoList(filteredVideos);
                
                // Reset main video to first video in filtered list
                if (filteredVideos.length > 0) {
                    const firstVideo = filteredVideos[0];
                    updateMainPlayer(firstVideo);
                }
            });
        });

        // Event listener for search input
        searchInput.addEventListener('input', () => {
            const query = searchInput.value.trim();
            let filteredVideos;
            
            if (query === '') {
                const activeCategory = document.querySelector('.category-btn.active').getAttribute('data-category');
                filteredVideos = filterVideos(activeCategory);
            } else {
                filteredVideos = searchVideos(query);
            }
            
            displayVideoList(filteredVideos);
            
            if (filteredVideos.length > 0) {
                updateMainPlayer(filteredVideos[0]);
            }
        });

        // Helper to update main player
        function updateMainPlayer(video) {
            mainVideo.src = `https://www.youtube.com/embed/${video.youtubeId}`;
            mainVideoTitle.textContent = video.title;
            mainVideoLecture.innerHTML = `<i class="fas fa-book-open"></i> Lecture ${video.id}`;
            mainVideoCategory.innerHTML = `<i class="fas fa-folder"></i> ${getCategoryName(video.category)}`;
            mainVideoDesc.textContent = video.description;
            
            // Highlight first item in list
            setTimeout(() => {
                document.querySelectorAll('.video-item').forEach(item => item.classList.remove('active'));
                const firstItem = document.querySelector(`.video-item[data-id="${video.id}"]`);
                if(firstItem) firstItem.classList.add('active');
            }, 50);
        }

        // Animation Observer (Matches Index/Common JS)
        document.addEventListener('DOMContentLoaded', () => {
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = 1;
                        entry.target.style.transform = 'translateY(0)';
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.fade-up').forEach(el => {
                el.style.opacity = 0;
                el.style.transform = 'translateY(20px)';
                el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                observer.observe(el);
            });
            
            // Initialize the page
            displayVideoList(videos);
            // Mark first as active
            const firstItem = document.querySelector('.video-item');
            if(firstItem) firstItem.classList.add('active');
        });
    </script>
</body>
</html>